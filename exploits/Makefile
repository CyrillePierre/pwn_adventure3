HACK_PATH:=$(shell pwd)/build/libhack.so
CXXFLAGS = -Wall -Wextra -fPIC -std=c++14 -g -D'HACK_PATH="$(HACK_PATH)"'
CXXFLAGS += -D_GLIBCXX_USE_CXX11_ABI=0
LDFLAGS = -shared -ldl
all: $(addprefix build/, libhack.so libpreloader.so libhack_cfy.so keyboard)

build/lib%.so: %.cpp
	@mkdir -p build
	$(CXX) $(CXXFLAGS) $+ $(LDFLAGS) -o $@

build/keyboard: keyboard.cpp
	@mkdir -p build
	$(CXX) $(CXXFLAGS) $+ -lX11 -lXi -o $@
